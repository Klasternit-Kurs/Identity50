@page "/"
@using Identity50.Shared
@using grpcServisi
@inject grpcServisi.GrpcIdentity.GrpcIdentityClient kli

<b>@_er</b>
<input @bind-value="_naziv" />
<button @onclick="Snimi">Unos</button>

<table style="width:100%">
	<tr>
		<th>ID</th>
		<th>Naziv</th>
	</tr>
	@foreach (Artikal a in Artikals)
	{
		<tr>
			<td>@a.ID</td>
			<td>@a.Naziv</td>
		</tr>
	}
</table>

@code
{
	private string _er;
	private string _naziv;
	List<Artikal> Artikals { get; set; } = new List<Artikal>();

	private async void Snimi()
	{
		_er = string.Empty;
		var rez = await kli.DodajArtikalAsync(new Artikal { Naziv = _naziv });
		if (rez.Uspeh)
		{
			Artikals.Add(rez.Artikal);
			StateHasChanged();
		}
		else
		{
			_er = rez.Greska;
			StateHasChanged();
		}
	}

	
}